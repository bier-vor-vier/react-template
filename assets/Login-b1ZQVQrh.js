import{j as n,b as E,k as g,l as f,n as k,o as S,z as p,L}from"./react-BECzdS4g.js";import{d as j,e as V,f as C,g as I,h as P}from"./index-DPrEyZq8.js";import{u as z}from"./useFeatureTranslation-CmG5Oknq.js";const A=({error:e})=>{var t;if(!e)return null;let s="Ein unbekannter Fehler ist aufgetreten.";return"data"in e&&(s=((t=e.data)==null?void 0:t.message)||s),n.jsxs("p",{className:"text-red-500",children:["❌ ",s]})},M=j({base:"transition-all",slots:{container:"shadow-lg rounded-sm p-6 flex flex-col gap-4 w-full bg-white dark:bg-gray-800 text-gray-800 dark:text-white",title:"flex items-center justify-center gap-x-2 text-2xl leading-none"},variants:{size:{sm:{container:"max-w-sm"},md:{container:"max-w-md"},lg:{container:"max-w-lg"}}}}),O=({onClick:e,children:s})=>{const[t,r]=E.useState(!1),a=async()=>{r(!0);try{await e()}catch(i){console.error("Fehler beim Absenden:",i)}finally{r(!1)}};return n.jsxs("button",{type:"button",onClick:a,disabled:t,className:V({variant:"primary"}),children:[t&&n.jsx("span",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s]})},x=(e,s,t)=>{if(e&&"reportValidity"in e){const r=g(t,s);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},w=(e,s)=>{for(const t in s.fields){const r=s.fields[t];r&&r.ref&&"reportValidity"in r.ref?x(r.ref,t,e):r&&r.refs&&r.refs.forEach(a=>x(a,t,e))}},T=(e,s)=>{s.shouldUseNativeValidation&&w(e,s);const t={};for(const r in e){const a=g(s.fields,r),i=Object.assign(e[r]||{},{ref:a&&a.ref});if(U(s.names||Object.keys(e),r)){const o=Object.assign({},g(t,r));f(o,"root",i),f(t,r,o)}else f(t,r,i)}return t},U=(e,s)=>{const t=b(s);return e.some(r=>b(r).match(`^${t}\\.\\d+`))};function b(e){return e.replace(/\]|\[/g,"")}function $(e,s){for(var t={};e.length;){var r=e[0],a=r.code,i=r.message,o=r.path.join(".");if(!t[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];t[o]={message:l.message,type:l.code}}else t[o]={message:i,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(m){return e.push(m)})}),s){var c=t[o].types,u=c&&c[r.code];t[o]=k(o,s,t,a,u?[].concat(u,r.message):r.message)}e.shift()}return t}function R(e,s,t){return t===void 0&&(t={}),function(r,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[t.mode==="sync"?"parse":"parseAsync"](r,s)).then(function(u){return i.shouldUseNativeValidation&&w({},i),{errors:{},values:t.raw?Object.assign({},r):u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:T($(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}}function B(e,s){const t=e.refine(r=>r,{});return S({...s,resolver:R(t)})}const K=j({slots:{input:"p-3 border border-gray-300 rounded-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200",inputFloating:"peer w-full border px-3 pt-5 pb-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 placeholder-transparent",labelFloating:"absolute left-3 top-1 text-gray-500 text-sm transition-all peer-placeholder-shown:top-4 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-500"},variants:{error:{true:{input:"border-red-500 focus:ring-red-500"}}}}),y=e=>{const{inputFloating:s,labelFloating:t}=K();return({label:r,error:a,...i})=>n.jsxs("div",{className:"relative w-full",children:[n.jsx(e,{...i,className:s()}),n.jsx("label",{className:t(),children:r}),a&&n.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.message})]})},v=e=>n.jsx("input",{...e,placeholder:" "}),Z=e=>n.jsx(v,{...e,type:"password"}),q=y(v),D=y(Z),G=()=>{const e=z("auth"),s=p.object({email:p.string().min(1,e("email.min")).email(e("email.email")),password:p.string().min(6,e("password.min"))}),{register:t,handleSubmit:r,formState:{errors:a}}=B(s),[i,{error:o}]=C(),l=I(),c=P(),u=async N=>{var h;await i(N).unwrap();const F=((h=c.state)==null?void 0:h.from)||"/";l(F,{replace:!0})},{container:d,title:m}=M({size:"sm"});return n.jsxs("form",{autoComplete:"off",className:d(),children:[n.jsxs("h2",{className:m(),children:[n.jsx(L,{size:24}),e("title")]}),n.jsx(q,{label:e("email"),...t("email"),error:a.email,autoFocus:!0}),n.jsx(D,{label:e("password"),...t("password"),error:a.password}),n.jsx(O,{onClick:r(u),children:"Login"}),n.jsx(A,{error:o})]})},W=()=>n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(G,{}),n.jsxs("p",{className:"text-sm text-center mt-4 dark:text-gray-300",children:["Noch kein Konto? ",n.jsx("a",{href:"#",className:"text-blue-500",children:"Registrieren"})]})]});export{W as default};
